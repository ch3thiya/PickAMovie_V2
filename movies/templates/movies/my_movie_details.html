{% extends 'movies/base.html' %}

{% block extra_head %}
    <script>
        tailwind.config.theme.extend.colors['movie-red'] = '#dc2626';
        tailwind.config.theme.extend.colors['movie-red-hover'] = '#b91c1c';
        tailwind.config.theme.extend.colors['dark-bg'] = '#000000';
        tailwind.config.theme.extend.colors['dark-surface'] = '#191919';
    </script>
{% endblock %}

{% block content %}
<!-- This new div will center the card on the page -->
<div class="h-full flex items-center justify-center p-6">
    <div class="max-w-5xl w-full">
        <div class="bg-dark-surface rounded-2xl overflow-hidden shadow-2xl flex flex-col lg:flex-row">
            <!-- Movie Poster -->
            <div class="lg:w-80 w-full h-96 lg:h-auto flex-shrink-0">
                {% if movie.poster_path %}
                    <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" alt="{{ movie.title }} Poster" class="w-full h-full object-cover">
                {% else %}
                    <div class="w-full h-full bg-dark-border flex items-center justify-center"><span class="text-text-secondary">No Poster</span></div>
                {% endif %}
            </div>
            
            <!-- Movie Details -->
            <div class="flex-1 p-8 lg:p-10">
                <h1 class="text-3xl lg:text-3xl font-bold text-white mb-4">{{ movie.title }}</h1>
                
                <div class="flex flex-wrap items-center gap-4 text-gray-300 mb-4">
                    {% if movie.release_date %}<span class="text-lg">{{ movie.release_date|slice:":4" }}</span>{% endif %}                    
                    {% if movie.runtime %}<span class="text-lg">{{ movie.runtime }} min</span>{% endif %}
                    <span class="text-lg font-semibold text-rating-gold">{{ movie.vote_average|floatformat:1 }}/10</span>
                </div>
                
                <div class="flex flex-wrap gap-3 mb-6">
                    {% for genre in movie.genres %}
                        <span class="bg-gray-700 px-4 py-2 rounded-full text-sm font-medium">{{ genre.name }}</span>
                    {% endfor %}
                </div>
                
                <p class="text-gray-300 text-lg leading-relaxed mb-6">{{ movie.overview }}</p>
                
                <div class="space-y-3 mb-8 text-gray-300">
                    {% if director %}<p><span class="font-semibold text-white">Director:</span> {{ director.name }}</p>{% endif %}
                    {% if cast %}<p><span class="font-semibold text-white">Cast:</span> {% for actor in cast %}{{ actor.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>{% endif %}
                    {% if full_language_name %}<p><span class="font-semibold text-white">Language:</span> {{ full_language_name }}</p>{% endif %}
                </div>
                
                <div class="space-y-4">
                    <div class="flex flex-col sm:flex-row gap-3">
                        <form action="{% url 'delete_from_list' %}" method="post" class="flex-1">
                            {% csrf_token %}
                            <input type="hidden" name="entry_id" value="{{ list_entry.id }}">
                            <button type="submit" class="w-full bg-movie-red hover:bg-movie-red-hover text-white font-bold py-3 px-6 rounded-lg transition-colors duration-200 text-base">Delete from List</button>
                        </form>

                        {% if list_entry.status == 'watch_later' %}
                        <form action="{% url 'move_to_watched' %}" method="post" class="flex-1">
                            {% csrf_token %}
                            <input type="hidden" name="entry_id" value="{{ list_entry.id }}">
                            <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 text-center text-base">Move to Watched</button>
                        </form>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}